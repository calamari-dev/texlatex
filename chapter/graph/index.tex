\documentclass[../../index]{subfiles}

\begin{document}
\chapter{グラフの作成}
本書では，次の2つの方法を紹介する．
\begin{enumerate}
  \item PGFPlotsによる方法
  \item GNUPlotによる方法
\end{enumerate}

なお，これらの他にも\TikZ のdatavisualizationライブラリによる方法もある．
また，多くの数学ソフトウェアは\LaTeXe に対応した出力，あるいはPDF出力を備えている．

\section{PGFPlotsによるグラフ作成}
\begin{codeblock}
\begin{tikzpicture}
  \begin{axis}[width=7cm]
    \addplot [smooth,samples=100,domain=-pi:pi] {cos(deg(x))};
    \addlegendentry{$\cos(x)$};
  \end{axis}
\end{tikzpicture}
\end{codeblock}

\begin{figure}[htbp]
  \centering
  \begin{tikzpicture}
    \begin{axis}[width=7cm]
      \addplot [smooth,samples=100,domain=-pi:pi] {cos(deg(x))};
      \addlegendentry{$\cos(x)$};
    \end{axis}
  \end{tikzpicture}
  \caption{PGFPlotsによる\(\cos(x)\)のグラフ}
\end{figure}

\section{GNUPlotによるグラフ作成}
あああ\footnote{\texttt{set term tikz}としている資料もあるが，これは\texttt{set terminal lua tikz}の省略形である．}．

\begin{codeblock}
gnuplot> set terminal lua tikz size 7cm,5cm
gnuplot> set output "gnuplot.tex"
gnuplot> set xrange [-pi:pi]
gnuplot> plot cos(x) linetype rgb "black" title '$\cos(x)$'
gnuplot> exit
\end{codeblock}

\inlinecode{\usepackage{gnuplot-lua-tikz}}を追加

\begin{codeblock}
\input{gnuplot.tex}
\end{codeblock}

\begin{figure}[htbp]
  \centering
  \includegraphics{gnuplot.pdf}
  \caption{GNUPlotによる\(\cos(x)\)のグラフ}
\end{figure}

\section{その他のグラフ}
3Dグラフなども同様の要領で作成できる．以下にPGFPlotsを利用した例を示す．

\begin{codeblock}
\begin{tikzpicture}
  \begin{axis}[width=7cm,colormap/blackwhite]
    \addplot3 [surf,miter limit=1,samples=30,domain=-2:2] {exp(-(x^2+y^2))};
  \end{axis}
\end{tikzpicture}
\end{codeblock}

\begin{figure}[htbp]
  \centering
  \begin{tikzpicture}
    \begin{axis}[width=7cm,colormap/blackwhite]
      \addplot3 [surf,miter limit=1,samples=30,domain=-2:2] {exp(-(x^2+y^2))};
    \end{axis}
  \end{tikzpicture}
  \caption{$e^{-(x^2+y^2)}$のグラフ}
\end{figure}

\section{補遺}
\subsection{グラフ描画の精度}
通常，PGFPlotsは\TeX 上で実装された浮動小数点数演算を利用して，関数のグラフを計算する．
しかし，処理系が\LuaLaTeX であり，\inlinecode{compat}に1.12以上のバージョンが指定されていれば，
PGFPlotsはLuaの数学エンジンを利用して計算を行う．これは\TeX 上の実装より高速かつ正確である\cite[p.54]{christian2021}．

\end{document}
